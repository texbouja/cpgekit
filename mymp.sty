%%% Jeu de couleurs pour le theme standard



\definecolor{mpwarm}{HTML}{D49B54}
\definecolor{mpcold}{HTML}{2E6777}
\definecolor{warmcol}{HTML}{D68A36}

\ifdark
  \colorlet{warmcol}{mpwarm}
  \colorlet{coldcol}{mpcold}
	\igset[colors]{    
    darkcol=coldcol!65,
    brightcol=warmcol!65,
  	linkcol=CornflowerBlue!85!black,
    neutralcol=black!10,
    fgcol=white,
    bgcol=black!93
  }
\else
  \colorlet{warmcol}{mpwarm}
  \colorlet{coldcol}{mpcold}
	\igset[colors]{    
        darkcol=coldcol!25,
        brightcol=warmcol!65!black,
        neutralcol=black!88,
        linkcol=CornflowerBlue!66!black,
        fgcol=black,
        bgcol=white
     }
\fi
\definecolor{importantcol}{HTML}{C3742D}
\ifsoutien
	\igset[colors]{    
  			importantcol=warmcol 
     }
\fi 

\colorlet{tcbcoltitle}{coldcol}
\tcbset{colback=bgcol,colupper=fgcol}
\AtBeginDocument{%
	\ifundef{\hypersetup}{}%
		{\hypersetup{linkcolor=linkcol}}%
}

\usetikzlibrary{shapes.misc, shadows}

\igset{simple deco={%
	\tikz [anchor=base,baseline] 
	\node [
		draw=tcbcoltitle, 
		text=tcbcoltitle, 
		inner sep=1.4pt, 
		minimum width=1.5em, 
		rounded corners=2pt
	] {#1};%
}}
\igdefdeco{lrmargin}{\deco@simple{#1}}
\fadjwidth=10pt 
\igset{math box style={rounded corners=4pt}}


%%%% sTyles des thÃ©orÃ¨mes 
\tcbsubskin{minskin}{empty}{%
      skin first=minskinfirst,skin middle=minskinmiddle,skin last=minskinlast
}
\tcbsubskin{minskinfirst}{empty}{%
    interior code={
        \draw [tcbcoltitle, line width=.6pt,rounded corners=4pt] 
            (title.south east) -| ([xshift=-4pt,yshift=-10pt]title.south west) 
							coordinate (PS);
        \fill  [tcbcoltitle] (PS) circle (2pt) ;
    },
    title style={blankest},
      skin first=minskinfirst,skin middle=minskinmiddle,skin last=minskinmiddle
}
\tcbsubskin{minskinlast}{empty}{
    interior code={
        \draw [tcbcoltitle,line width=.6pt, rounded corners=4pt] 
						([yshift=14pt] interior.south west) 
						coordinate (PSW) |-
						([xshift=4pt]interior.south east) -- ++ (0,14pt) 
            coordinate (PSE);
        \fill  [tcbcoltitle] (PSW) circle (2pt) ;
				\fill  [tcbcoltitle] (PSE) circle (2pt) ;
    },
    title style={blankest},
    skin first=minskinmiddle,skin middle=minskinmiddle,skin last=minskinlast,
}
\tcbsubskin{minskinmiddle}{empty}{
    skin first=minskinmiddle,skin middle=minskinmiddle,skin last=minskinmiddle
}
\tcbset{%
	minimal/.style={skin=minskin,
		arc=0pt,
		outer arc=0pt,
		boxsep=0pt,
		top=0pt,bottom=8pt,left=3pt,right=0pt,
		boxrule=0pt,%
		bottomtitle=0pt,
		middle=3pt,
		interior code={%   
        %frame code={%
        \draw [tcbcoltitle,line width=.6pt, rounded corners=4pt] 
						([yshift=14pt] interior.south west) 
						coordinate (PSW) |-
						([xshift=4pt]interior.south east) -- ++ (0,14pt) 
            coordinate (PSE);
        \fill  [tcbcoltitle] (PSW) circle (2pt) ;
				\fill  [tcbcoltitle] (PSE) circle (2pt) ;
        \draw [tcbcoltitle, line width=.6pt,rounded corners=4pt] 
            (title.south east) -| ([yshift=-10pt, xshift=-4pt]title.south west) 
						coordinate (PS);
            \fill  [tcbcoltitle] (PS) circle (2pt) ;
        }
	}} 

\tikzset{description path style/.style={%
				fill = none,
                draw = none,
                text = coldcol, 
				font = \footnotesize\sffamily,
				#1}
}
\tcbset{description path/.style={%
	overlay unbroken and first	= {%
    	\path let \p1=(title.north east), 
		 \p2=(frame.north east) in
			node [%
        		anchor=west,
				text width=\x2-\x1,
				description path style
				] 
			at (title.east) {(#1)};
  		}
}}
\tcbset{important/.style={%
	coltitle	= importantcol,
	bottom= 10pt,
	underlay unbroken and last	= {\node at (frame.south east) 
		[text=importantcol, 
		 font=\tiny\scshape, 
		 anchor=south east, 
		 yshift=-1pt,
		] 
		{\ifexo@type exercice \else r\'esultat\fi{} important};},
		#1
}}
\tcbset{igcg/.style={%
	minimal,
	top=3pt,
	after skip =3pt
}} 

\tcbset{@demolink/.style 2 args={%
	%bottom=14pt,
	underlay unbroken and last={\node (link) at (frame.south east) 
		[text=linkcol,
		 draw=linkcol,
		 fill=none,
		 inner ysep=2pt, inner xsep=6pt,
		 font=\tiny\scshape\vphantom{(}, 
		 anchor=south east, 
		 rounded rectangle ,
		 yshift=-\baselineskip
		] 
		{#2 \thetcbcounter, page \pageref*{#1@\thetcbcounter}};},
		hyperlink node={#1@\thetcbcounter}{link}
	}}


\ifserie
\tcbset{igcgthm/.style={%
	igcg, left=20pt, coltitle=coldcol, colbacktitle=tcbcoltitle,
    attach boxed title to top left, %={yshift=-\tcboxedtitleheight/2-1pt},
	boxed title style={boxsep=0pt, after skip=0pt}, 
}}
\tcbset{igcgexe/.style={%
	igcg, coltitle=warmcol,
    attach boxed title to top left ={xshift=-1pt},
	boxed title style={arc=0pt, boxsep=0pt, left=0pt, after skip=0pt},
}}
\igtheoremstyle{%
	theorem style={igcgthm, coltitle=coldcol},
	definition style={igcgthm, coltitle=coldcol},
	exercise style=igcgexe,
}
\fi 

\ifcours
\tcbset{igcgthm/.style={%
	igcg, left=6pt,
    attach boxed title to top left, %={yshift=-\tcboxedtitleheight/2-1pt},
	boxed title style={boxsep=0pt, after skip=0pt}, 
}}
\tcbset{igcgexe/.style={%
	igcg, left=16pt, 
    coltitle=importantcol, 
    attach boxed title to top left ={xshift=-1pt},
	boxed title style={arc=0pt, boxsep=0pt, left=0pt, after skip=0pt},
}}
\igtheoremstyle{%
	theorem style={igcgthm, coltitle=warmcol, colbacktitle=warmcol},
	definition style={igcgthm, coltitle=coldcol, colbacktitle=coldcol},
	exercise style=igcgexe,
}
\fi
\igtheoremstyle{%
remark style = {%
		blankest, 
		coltitle=neutralcol,
		top=0pt, bottomtitle=5pt, 
		left=20pt, before title={\hskip-14pt},
		borderline west={.6pt}{.6pt}{tcbcoltitle},
		titled items={coltitle=tcbcoltile}}
}
\igrenewtheorem[use counter from=rema]{remas}
{Remarques}
{}
{remark}
{titled items}

\igrenewtheorem[use counter from=exem]{exemf}
{Exemple fondamentaux}
{}
{remark}
{coltitle=warmcol,titled items}

\igrenewtheorem[use counter from=defi]{voca}
	{Vocabulaire}
	{}
	{remark}
	{theorem name, titled items}
\igrenewtheorem[use counter from=defi]{nota}
	{Notations}
	{}
	{remark}
	{theorem name, titled items}
\igtheoremstyle{proof style={%
	blankest,
	colbacktitle=linkcol,
	attach title to upper=\par\nobreak,
	left=8pt, right=3pt, top=0pt, bottom=0pt,
	before title={\hskip-8pt},
	code={\igenum{0}{marge*}},
	after skip=2\bigskipamount
}}
\tikzset{proof title style/.style={
	rounded corners=6pt,
	inner xsep=8pt,
	inner ysep=2pt,
	fill=none,
	draw=linkcol, 
	text=linkcol
}}

%%% Style des titres 

\igdeflabel{section}{|I|}
\igdeflabel{subsection}{|S|.|1|}
\titleformat{\section}
	{\sffamily\scshape\LARGE\color{coldcol}}
	{\deco@simple{\large\enskip\bfseries\label@section\enskip\null}}
	{6pt}
	{#1}
\titleformat{\subsection}
	{\sffamily\scshape\Large\color{coldcol}}
	{\large\label@subsection.}
	{5pt}
	{#1}
\titlespacing{\section}{\z@}{\bigskipamount}{*1}

\ifchapter@in@class
\igdeflabel{chapter}{\oldstylenums{|1|}}
\igset[sections]{%
	chapter label anchor=south east,
	chapter style={%
		colback=warmcol,
		coltext=coldcol,
		boxrule=-1pt,
		lowerbox=ignored,
		top=4cm, bottom=1cm,
		left=5cm, right=3cm,
		enlarge left by=-4cm,
		width=\textwidth+6cm,
		sharp corners,
		fontupper=\fontsize{32}{32}\selectfont\filright, 
		borderline south={6pt}{-3pt}{warmcol!85!black}
  },
chapter label style={%
		rounded corners=12pt,
		top color=coldcol!85, bottom color=coldcol!15!black,
		draw=none, text=white,
  	inner xsep=20pt, inner ysep=8pt,
  	align=center,
  	font=\Large\sffamily\bfseries chapitre\ ,
  	xshift=-2cm,
  	anchor=east
	},
chapter label decoration={%
	\draw [warmcol, line width =2pt, rounded corners=12pt] 
		(chapter label.east) |- (chapter label.north west) 
		-- (chapter label.west);
	\fill [warmcol!85!black] 
		(chapter label.east) circle (3pt)
		(chapter label.west) circle (3pt);
	}
}
\titlespacing*{\chapter}{0pt}{-4cm-\headheight-\headsep}{*1}
\fi 

%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%% Page de garde %%%%%%  
%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\STRIP{}
\let\endStrip\relax 
\NewDocumentEnvironment{cgnew@title@page}{}{%
	\ifsoutien%
		\pagecolor{white}% 
		\pgfdeclareimage[width=\pdfpagewidth]
			{cover}
			{../../img/cover/cpge-\ig@classe}%
	\else%
		\pagecolor{white}%
		\pgfdeclareimage[width=\pdfpagewidth]
			{cover}
			{../../img/cover/cpge-\ig@classe}%
	\fi%
	\color{white}%
	\ignorespaces%
	\iftitlepage@exception%
		\begin{tikzpicture} [overlay,remember picture]%
			\node at ([xshift=1.9cm, yshift=.4cm]current page.south) 
					[anchor=south,inner sep=0] 
					{\pgfuseimage{cover}};
		\end{tikzpicture}%
	\else%
		\begin{tikzpicture} [overlay,remember picture]%
			\node at (current page.south) 
					[anchor=south,inner sep=0] 
					{\pgfuseimage{cover}};
		\end{tikzpicture}%
		\fi%
		\vskip.15\pdfpageheight%
		\hskip.2\pdfpagewidth%
		\begin{minipage}{.75\textwidth}
		\fil@inner@titlepage% 
}{%
	\end{minipage}%
	\hfill\leavevmode\vfill%
} 
\NewDocumentEnvironment{cgnew@title@inline}{}{%
		\thispagestyle{plain}% 
		\ifstriptitle%
			\dimdef\wire@width{.66\textwidth}%
		\else%
			\dimdef\wire@width{\columnwidth}%
		\fi %
		\pgfdeclareimage[width=\wire@width]{twire}
			{../../img/cover/mymp_t}%
		\pgfdeclareimage[width=\wire@width]{bwire}
			{../../img/cover/mymp_b}%
		\begin{STRIP}%
		\fil@outer 
		\tikz\node{\pgfuseimage{twire}};\par
		\fil@inner 
}{%
		\par\medskip
		\tikz\node {\pgfuseimage{bwire}};
		\end{STRIP}%
}
\igset[title]{%
	before 	=	\ifstriptitle
							\let\STRIP\strip%
							\let\endSTRIP\endstrip%
						\fi%
						\let\title@centre\relax%
						\let\title@classe\relax%
						\begin{cgnew@title@inline},
	after 	=	\end{cgnew@title@inline},
	before* =	\let\title@centre\relax%
						\let\title@classe\relax%
						\begin{cgnew@title@page},
	after*	=	\end{cgnew@title@page},
	inner align*=l,
	afterskip=3
}
\AtEndPreamble{%
	\iftitlepage
		\renew@title@format[4]
			(\bfseries\color{warmcol})
			{document}%
		\renew@title@format[3]
			(\scshape\bfseries)
			{theme}%
		\renew@title@format[2]
			(\scshape)
			{subtheme}%
		\renew@title@format
			(\hfill\tiny)
			{auteur}%
	\else
		\igaddkeyword@title(\LARGE\bfseries\color{coldcol}){document}
		\igaddkeyword@title(\Large\bfseries){devoir}
		\igaddkeyword@title(\Large\bfseries){epreuve}
		\igaddkeyword@title(\Large\bfseries){concours}
		\igaddkeyword@title(\Large\bfseries\scshape\color{warmcol}){theme}
		\igaddkeyword@title(\large\itshape\scshape){subtheme} 
		\igaddkeyword@title(\small\itshape){periode}
	\fi%
}
\igdeftitleformat*{
  |document|\par
  \bigskip\hrule\bigskip
  |theme|\\
  |subtheme|\par
  \bigskip
  |auteur|
}
%%%% Tete et pied de page
\newdimen\logo@width
\newdimen\head@height
\logo@width=.2\paperwidth
\ifdim\logo@width>2cm\relax	
	\logo@width=2cm
\fi
\head@height=\dimexpr\headsep+\headheight\relax 
\ifsoutien 
	\pgfdeclareimage[width=\logo@width]{mymp}
		{../../img/cover/mymp_foot}
\else
	\pgfdeclareimage[width=\logo@width]{mymp}
		{../../img/cover/mymp_foot}
\fi 
\igaddkeyword{hf}{mymp}{
	\begin{tikzpicture}[yshift=8pt, overlay] 
		\draw [warmcol] (0,0) -- (-\linewidth,0) ;
		\node [xshift=6pt, inner sep=0pt, anchor=east, fill=bgcol] {\pgfuseimage{mymp}};
	\end{tikzpicture}
}
\renewpagestyle{igmain}[\fontsize{8}{8}\sffamily\scshape\itshape]{ 
	\renewcommand\makeheadrule{%
		\unless\ifprint
		\ifsoutien 
			\tikz[overlay]
				\draw [warmcol, line width=\head@height] 
				(-3cm,.5\head@height-3pt) -- (\paperwidth+3cm,.5\head@height-3pt);
		\else 
		\tikz[overlay]
				\draw [warmcol, line width=\head@height] 
				(-3cm,.5\head@height-3pt) -- (\paperwidth+3cm,.5\head@height-3pt);
		\fi\fi%
	}
	\renewcommand\makefootrule{%
	\begin{tikzpicture}[overlay, yshift=8pt] 
		\ifsoutien
			\draw [warmcol] (-3cm,0) -- (\paperwidth,0) ;
		\else
			\draw [warmcol] (-3cm,0) -- (\paperwidth,0) ;
		\fi 
		\node  at (\textwidth,0)
			[inner ysep=0pt, inner xsep=5pt, anchor=east, fill=bgcol]
			 {\pgfuseimage{mymp}};
	\end{tikzpicture}
	}
	\igsethead(|theme|)()(|document|)
	\igsetfoot(|classe|)(|pages|)()
}
\renewpagestyle{plain}[\fontsize{8}{8}\sffamily\scshape\itshape]{%
	\renewcommand\makefootrule{%
	\begin{tikzpicture}[overlay, yshift=8pt] 
	\ifsoutien
		\draw [warmcol, line width=.6pt] (-3cm,0) -- (\paperwidth,0) ;
	\else
		\draw [warmcol, line width=.6pt] (-3cm,0) -- (\paperwidth,0) ;
	\fi 
		\node  at (\textwidth,0)
			[inner ysep=0pt, inner xsep=5pt, anchor=east, fill=bgcol]
			 {\pgfuseimage{mymp}};
	\end{tikzpicture}
	}
	\sethead{}{}{}
	\setfoot{}{\thepage}{}
}
\endinput
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




